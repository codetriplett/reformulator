/*! reformulator 2018-07-28 */

!function(){"use strict";var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}var e="([a-zA-Z_$][0-9a-zA-Z_$]*)",r="(\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')",t="(!doctype|[a-z]+)",n="(\\{("+r+"|[^}])*\\})",a="(\\[("+r+"|[^\\]])*\\])",i="< *"+t+" *("+a+"("+r+"|[^>])*)?>",g=new RegExp("^"+e+"$"),c="()|&=!<>#+-/*%^.",u="0012333345566678";function m(e,r){return!(")"===e||")"===r||!r)&&("("===e||"("===r||u[c.indexOf(e)]<u[c.indexOf(r)])}var s=/^(string|number)$/,o=/^(wbr|track|source|param|meta|link|keygen|input|img|hr|embed|command|col|br|base|area|!doctype)$/,l={img:{alt:""},a:{href:"javascript:void(0);"}};function h(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.type=e,this.scope=r.scope,this.classNames=r.classNames||[],this.attributes=j(l[e]||{},r.attributes||{})}h.prototype.render=function(e){var r=this.type,t=this.classNames,n=this.attributes,a=0<t.length?' class="'+t.sort().join(" ")+'"':"",i="",c="",u="";Object.keys(n).sort().forEach(function(e){var r=n[e],t=" "+e;0===e.indexOf("on")?i=t:s.test(void 0===r?"undefined":b(r))?c+=t+'="'+r+'"':!0===r&&(u+=t)});var l="<"+r+a+c+u+">";return o.test(r)?l:(k(e)&&(e=this.scope),Array.isArray(e)||(e=[e]),""+l+(e=e.filter(function(e){return s.test(void 0===e?"undefined":b(e))}).join(""))+"</"+r+">"+(i?"\x3c!--"+i+" --\x3e":""))};var f=new RegExp("(\x3c!--( ([a-zA-Z_$][0-9a-zA-Z_$]*))+ --\x3e)?$");function A(e,r){if("string"==typeof e){var t=e.match(f)[0];if(t)return t.slice(4,-3).trim().split(" ").forEach(function(e){return r[e]=!0}),e.slice(0,-t.length)}return e}function k(e,r){return!!(null==e||"number"==typeof e&&isNaN(e)||r&&(""===e||"object"===(void 0===e?"undefined":b(e))&&!Object.keys(e).length))}function y(r,t,n){if(!(null!==r&&"object"===(void 0===r?"undefined":b(r))||null!==t&&"object"===(void 0===t?"undefined":b(t))))return r===t;if(k(r)||k(t))return!1;var e=Object.keys(r),a=Object.keys(t);return!(!n&&e.length!==a.length||n&&e.length<=a.length)&&(a.forEach(function(e){if(!y(r[e],t[e],n))return!1}),!0)}function j(r,t){if(Array.isArray(r)&&Array.isArray(t)){var e=r.length,n=t.length,a=Math.min(e,n);return r.slice(0,a).map(function(e,r){return j(e,t[r])}).concat(e<n?t.slice(e):r.slice(n))}if(null===r||null===t||"object"!==(void 0===r?"undefined":b(r))||"object"!==(void 0===t?"undefined":b(t))||Array.isArray(r)||Array.isArray(t))return t;var i={},c=Object.keys(r),u=Object.keys(t);return c.forEach(function(e){i[e]=-1!==u.indexOf(e)?j(r[e],t[e]):r[e]}),u.forEach(function(e){-1===c.indexOf(e)&&(i[e]=t[e])}),i}var x=/ +/g,w=new RegExp("^"+t+"$"),E=new RegExp("^"+a);var p="()|&=!<>#+\\-/*%^.\\?",v="(((< *(!doctype|[a-z]+) *((\\[((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^\\]])*\\])((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^>])*)?>|(\\[((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^\\]])*\\])|(\\{((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^}])*\\})|(\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*'))|(-?(0|[1-9][0-9]*)(.[0-9]+)?)|[^"+p+":,])*)",O=new RegExp("^([()|&=!<>#+\\-/*%^.\\?] *(((< *(!doctype|[a-z]+) *((\\[((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^\\]])*\\])((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^>])*)?>|(\\[((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^\\]])*\\])|(\\{((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^}])*\\})|(\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*'))|(-?(0|[1-9][0-9]*)(.[0-9]+)?)|[^()|&=!<>#+\\-/*%^.\\?:,])*)) *"),$=new RegExp("["+p+"] *-(?="+e+"|\\()"),R=new RegExp("["+p+"] *!(?="+v+")"),z=new RegExp("["+p+"] *\\?(?="+v+")");function N(e){for(var r=[],t=[],n=void 0,a=("("+e.trim()).replace(R,function(e){return e[0]+"(!"}).replace(z,function(e){return e[0]+"(?"}).replace($,function(e){return e[0]+"(-1 * "}),i=arguments.length,c=Array(1<i?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];for(;a.length;){var l=a.match(O);if(null===l)return null;n=l[0],a=a.slice(n.length);var s=n[0],o=a[0],f=D.apply(void 0,[n.slice(1)].concat(c));if(m(s,o))t.splice(0,0,s),r.splice(0,0,f);else for(r[0]=S(r[0],s,f);0<t.length&&!m(t[0],o);){var y=r.splice(0,1)[0],p=t.splice(0,1)[0];r[0]=S(r[0],p,y)}}var v=r[0];if(null===v||"object"!==(void 0===v?"undefined":b(v))||Object.keys(v).length)return v}function S(e,r,t){var n="empty",a="empty";k(e)||(n=Array.isArray(e)?"array":void 0===e?"undefined":b(e)),k(t)||(a=Array.isArray(t)?"array":void 0===t?"undefined":b(t));var i=r+":"+n+":"+a;"empty"!==n&&(n="object"===(void 0===e?"undefined":b(e))?"structure":"literal"),"empty"!==a&&(a="object"===(void 0===t?"undefined":b(t))?"structure":"literal");var c=r+":"+n+":"+a,u=void 0;switch(r){case"|":u=k(e)||!1===e?t:e;break;case"&":u=k(e)||!1===e?null:t}switch(c){case"(:empty:structure":case"(:empty:literal":u=t;break;case"):structure:empty":case"):literal:empty":u=e;break;case"=:structure:structure":u=y(e,t)?e:null;break;case"=:literal:literal":u=e===t?e:null;break;case"!:structure:structure":case"!:structure:literal":case"!:structure:empty":u=y(e,t)?null:e;break;case"!:literal:literal":u=e!==t?e:null;break;case"!:empty:structure":case"!:empty:literal":case"!:empty:empty":u=void 0===e?k(t,!0):null;break;case"<:structure:structure":u=y(t,e,!0)?e:null;break;case"<:literal:literal":u=e<t?e:null;break;case">:structure:structure":u=y(e,t,!0)?e:null;break;case">:literal:literal":u=t<e?e:null;break;case"+:literal:literal":u=e+t;break;case"?:empty:structure":case"?:empty:literal":case"?:empty:empty":u=void 0===e?!k(t,!0):null}switch(i){case"#:number:number":u=(e-1/(2*Math.pow(10,t))).toFixed(t);break;case"+:object:object":u=j(e,t);break;case"+:array:array":u=[].concat(d(e),d(t));break;case"+:array:boolean":case"+:array:number":case"+:array:string":case"+:array:object":u=[].concat(d(e),[t]);break;case"+:boolean:array":case"+:number:array":case"+:string:array":case"+:object:array":u=[e].concat(d(t));break;case"-:object:string":e[t];u=function(e,r){var t={};for(var n in e)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,[t]);break;case"-:number:array":case"-:number:string":u=t.slice(e);break;case"-:array:number":case"-:string:number":u=e.slice(0,t);break;case"-:string:string":u=e.replace(new RegExp(t,"g"),"");break;case"-:number:number":u=e-t;break;case"/:string:number":case"/:string:string":u=e.split(new RegExp(t,"g"));break;case"/:number:number":u=e/t;break;case"*:array:string":case"*:string:array":var l="string"==typeof e?e:t;u=(Array.isArray(e)?e:t).join(l);break;case"*:number:number":u=e*t;break;case"*:number:string":case"*:string:number":var s="number"==typeof e?e:t,o="string"==typeof e?e:t;for(u="";0<s;)u+=o,s--;break;case"%:number:number":u=e%t;break;case"^:number:number":u=Math.pow(e,t);break;case".:object:string":case".:object:number":case".:array:string":case".:array:number":case".:string:string":case".:string:number":u=e[t]}return k(u)?null:u}var Z=new RegExp("^ *(((\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*')|[^:,])*) *$");function _(e){for(var r="<"===e[0],t=e.slice(1,-1)+",",n=[],a={},i=arguments.length,c=Array(1<i?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];for(;t.length;){var l=t.indexOf(":"),s=t.indexOf(",");s<=l&&(l=-1);var o=t.slice(0,l).trim(),f=t.slice(l+1,s),y=r&&0===o.indexOf("on");if(t=t.slice(s+1),-1!==l&&!g.test(o)||!Z.test(f))return;var p=N.apply(void 0,[f].concat(c))||y||null;k(p)||(-1===l?n.push(p):a[o]=p)}return[a].concat(n)}function M(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!t)return null;if(Array.isArray(n[0])){var a=n.slice(1),i=n[0].map(function(e){return M.apply(void 0,[t,e].concat(d(a)))}).filter(function(e){return!k(e)});return 0<i.length?i:null}if("string"==typeof t){var c=N.apply(void 0,[t].concat(n));return c instanceof h?c.render():(Array.isArray(c)&&c[0]instanceof h&&(c=0<(c=c.map(function(e){return e.render()})).length?c:null),k(c)?null:c)}if(Array.isArray(t)){var u=[],l=n[0],s=n.slice(1),o=!1,f={},y=void 0;if(t.concat([""]).forEach(function(a){var i=Array.isArray(a),e=void 0;y?e=("string"==typeof y?N:M).apply(void 0,[y,l].concat(d(s))):i&&(e="");if(!k(e)&&!1!==e){Array.isArray(e)?o=!0:e=[e];var c=e[0]instanceof h;o=!c&&o,e.forEach(function(e){var r=c?e.scope:e||null;r=!0!==r?r:null;var t=i?M.apply(void 0,[a,r,l].concat(d(s))):r;if(!k(t)||null===r||0===a.length){c||(Array.isArray(t)?o=!0:"object"===(void 0===t?"undefined":b(t))&&(l=j(l,t))),c&&(t=A(t,f));var n=c?e.render(t):t;c&&(n=A(n,f)),u=u.concat(n)}})}y=i?void 0:a}),!o){if(0===u.length)return null;var p=Object.keys(f).join(" ");p&&u.push("\x3c!-- "+p+" --\x3e"),u=u.reduce(function(e,r){var t=S(e,"+",r);return(void 0===t?"undefined":b(t))===(void 0===r?"undefined":b(r))&&null!==t?t:r})}return k(u)?null:u}if("object"===(void 0===t?"undefined":b(t))){var v={};return Object.keys(t).forEach(function(e){var r=M.apply(void 0,[t[e]].concat(n));k(r)||(v[e]=r)}),0<Object.keys(v).length?v:null}}var q=/^(true|false)$/,P=new RegExp("^"+r+"$"),F=new RegExp("^"+n+"$"),J=new RegExp("^"+a+"$"),B=new RegExp("^"+i+"$"),C={"'":/\\'/g,'"':/\\"/g};function D(e){for(var r=e.trim(),t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(""!==r){if(!isNaN(r))return Number(r);if(P.test(r)){var i=r[0];return r.slice(1,-1).replace(C[i],i)}if(q.test(r))return"true"===r;if(F.test(r)){var c=_.apply(void 0,[r].concat(n));return c?c[0]:null}if(J.test(r)){var u=_.apply(void 0,[r].concat(n));return u?u.slice(1):null}if(B.test(r))return function r(e){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=e.indexOf("["),c=e.slice(1,i).trim();if(w.test(c)){if(-1===i)return new h(c);var u=e.slice(i).match(E)[0].slice(1,-1).trim(),l=""+e.slice(i+u.length+2,-1),s=N.apply(void 0,[u||"@"].concat(n));if(!u||!k(s)){if(Array.isArray(s)){var o=e.slice(0,i)+"[]"+l+">",f=s.map(function(e){return r.apply(void 0,[o,e].concat(n))}).filter(function(e){return!k(e)});return 0<f.length?f:null}var y=_.apply(void 0,["<"+l+">",s].concat(n));if(!y)return null;var p=y[0];return new h(c,{scope:s,classNames:y.slice(1).reduce(function(e,r){return e.concat("string"==typeof r?r.trim().split(x):r)},[]),attributes:p})}}}.apply(void 0,[r].concat(n));if(!g.test(r)&&"@"!==r)return null;var l=void 0,s=!0,o=!1,f=void 0;try{for(var y,p=n[Symbol.iterator]();!(s=(y=p.next()).done);s=!0){var v=y.value;if("@"===r?l=v:v&&null!==v&&"object"===(void 0===v?"undefined":b(v))&&(l=v[r]),!k(l)||v&&v.hasOwnProperty(r))break}}catch(e){o=!0,f=e}finally{try{!s&&p.return&&p.return()}finally{if(o)throw f}}return k(l)?null:l}}var G=new RegExp("^ *< *(!doctype|[a-z]+)( *([a-zA-Z_$][0-9a-zA-Z_$]*)( *=(\"(\\\\\"|[^\"])*\"|'(\\\\'|[^'])*'))?)*>");window.reformulator=function(e){for(var r=arguments.length,t=Array(1<r?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];var a=t[t.length-1];if(!(a instanceof Element)&&document&&"function"==typeof document.querySelector){var i=document.querySelectorAll("script");a=i&&0<i.length&&i[i.length-1].previousSibling}var c={},u=A(M.apply(void 0,[e].concat(t)),c);return a||(G.test(u)&&0<Object.keys(c).length?u+"<script>resolve("+[e].concat(t).map(function(e){return JSON.stringify(e)}).join(", ")+");<\/script>":u)}}();